<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Факультети</title>
    <link rel="stylesheet" href="../css/faculties.css">
    <link  href="https://unpkg.com/cropperjs@1.5.13/dist/cropper.min.css" rel="stylesheet"/>
    <script src="https://unpkg.com/cropperjs@1.5.13/dist/cropper.min.js"></script>
</head>
<body>
    <header>
        <h2>Факультети</h2>
    </header>
    <main>
        <div class="first-part">
            <h1 class="page-title">Оберіть свій факультет</h1>
            <p class="page-subtitle">Щоб обрати факультет, потрібно дізнатися навчальну базу та спеціальності, 
                що є на факультеті. Пропронуємо вам обрати Факультет комп'ютерних наук!</p>
            <a href="#" class="titles">ГАЛУЗЬ ЗНАНЬ 12 ІНФОРМАЦІЙНІ ТЕХНОЛОГІЇ</a><br>
            <a href="#">Спеціальність <span>121</span> Інженерія програмного забезпечення, освітня програма "Інженерія програмного забезпечення"</a><br>
            <a href="#">Спеціальність <span>122</span> Комп'ютерні науки, освітня програма "Комп'ютерні науки"</a><br>
            <a href="#">Спеціальність <span>123</span> Комп'ютерна інженерія, освітня програма "Комп'ютерна інженерія"</a><br>
            
            <a href="#" class="titles">ГАЛУЗЬ ЗНАНЬ 17 ЕЛЕКТРОНІКА, АВТОМАТИЗАЦІЯ ТА ЕЛЕКТРОННІ КОМУНІКАЦІЇ</a><br>
            <a href="#">Спеціальність <span>174</span> Автоматизація, комп'ютерно-інтегровані технології та робототехніка, 
                освітня програма "Автоматизація, комп'ютерно-інтегровані технології та робототехніка"</a><br>
            
            <a href="#" class="titles">ГАЛУЗЬ ЗНАНЬ 01 ОСВІТА / ПЕДАГОГІКА</a><br>
            <a href="#">Спеціальність <span>014.04</span> Середня освіта (Математика), освітня програма "Середня освіта (Математика та інформатика)"</a><br>
            <a href="#">Спеціальність <span>014.08</span> Середня освіта (Фізика та астрономія), освітня програма 
                "Середня освіта (Фізика, астрономія та інформатика)"</a><br>

            <a href="#" class="titles">ГАЛУЗЬ ЗНАНЬ 02 КУЛЬТУРА І МИСТЕЦТВО</a><br>
            <a href="#">Спеціальність <span>022</span> Дизайн, освітня програма "Графічний дизайн і реклама"</a><br>
        </div>
        <hr class="hrline">

        <p class="textcool" id="special-news">Новини спеціальностей</p>
        <div class="cards">
            <div class="blog-card">
                <div class="blogcss">
                    <div class="blog-image">
                        <img src="../img/іпз.jpg" alt="Blog Image">
                    </div>
                </div>
                <p class="blog-category">121</p>
                <h2 class="blog-title">ОБИРАЙ ІПЗ</h2>
                <br>
                <div class="blog-meta">
                    <a href="https://www.youtube.com/watch?v=MxzSwLMxcf0" target="_blank">
                        <img src="../img/go-to.png" alt="Go to">
                    </a>
                </div>
            </div>
        
            <div class="blog-card">
                <div class="blogcss">
                    <div class="blog-image">
                        <img src="../img/компн.jpg" alt="Blog Image">
                    </div>
                </div>
                <p class="blog-category">122</p>
                <h2 class="blog-title">ОБИРАЙ КОМП'ЮТЕРНІ НАУКИ</h2>
                <div class="blog-meta">
                    <a href="https://www.youtube.com/watch?v=trjOQB6LNIw" target="_blank">
                        <img src="../img/go-to.png" alt="Go to">
                    </a>
                </div>
            </div>
        
            <div class="blog-card">
                <div class="blogcss">
                    <div class="blog-image">
                        <img src="../img/компі_1.png" alt="Blog Image">
                    </div>
                </div>
                <p class="blog-category">123</p>
                <h2 class="blog-title">ОБИРАЙ КОМП'ЮТЕРНУ ІНЖЕНЕРІЮ</h2>
                <div class="blog-meta">
                    <a href="https://www.youtube.com/watch?v=2nLbi9zoiJ0" target="_blank">
                        <img src="../img/go-to.png" alt="Go to">
                    </a>
                </div>
            </div>
        
            <div class="blog-card">
                <div class="blogcss">
                    <div class="blog-image">
                        <img src="../img/акіт_1.jpg" alt="Blog Image">
                    </div>
                </div>
                <p class="blog-category">174</p>
                <h2 class="blog-title">ОБИРАЙ АВТОМАТИЗАЦІЮ</h2>
                <br>
                <div class="blog-meta">
                    <a href="https://www.youtube.com/watch?v=i2fdOaNu_hY" target="_blank">
                        <img src="../img/go-to.png" alt="Go to">
                    </a>
                </div>
            </div>
        
            <div class="blog-card">
                <div class="blogcss">
                    <div class="blog-image">
                        <img src="../img/дизайн_1_blured.jpg" alt="Blog Image">
                    </div>
                </div>
                <p class="blog-category">022</p>
                <h2 class="blog-title">ОБИРАЙ ДИЗАЙН</h2>
                <br>
                <div class="blog-meta">
                    <a href="https://www.youtube.com/watch?v=h6YEkwr0TEk" target="_blank">
                        <img src="../img/go-to.png" alt="Go to">
                    </a>
                </div>
            </div>
            <!--<div style="width: 100%; padding-bottom: 0px; margin-bottom: 0px;">-->
                <hr class="hrline" style="width: 100%; margin-bottom: 0px;">
                <p class="textcool" id="user-news" style="width: 100%; margin-bottom: 0px; margin-top: 0px;">Новини користувачів</p>
            <!--</div>-->
        </div>
        
        <hr class="hrline">
        <p class="textcool" id="add-your">Додай свою новину</p>
        
        <div class="add-news-container">
            <a href="#" class="add-news-card">
                <img src="../img/shake-hands.png" alt="Додати новину">
            </a>
            <p>Додай своє</p>
            <div id="post-editor" class="editor-modal" style="display: none;">
                <div class="editor-content">
                    <h2>Новий допис</h2>
                    <input type="text" id="post-title" placeholder="Тема допису">
                    <p id="title-char-count">0/55 символів</p>
                    <textarea id="post-body" placeholder="Основний текст..."></textarea>
                    <input type="file" id="post-image">
                    <div id="crop-container">
                        <img id="image-to-crop" />
                        <button id="crop-button">Обрізати</button>
                    </div>
                    <textarea id="post-link" placeholder="Посилання (необов'язково)"></textarea>
                    <div class="editor-buttons">
                        <button id="publish-post">Опублікувати</button>
                        <button id="close-editor">Закрити</button>
                    </div>
                </div>
            </div>            
        </div>
        </main>
        <footer>
            <p>&copy; 2025 Сайт новин ЧНУ імені Петра Могили</p>
        </footer>
        <script src="../js/add-post.js"></script>
        <script>
            document.addEventListener('DOMContentLoaded', () => {
        renderStoredPosts();
    });

    /*
    function renderStoredPosts() {
        const cardsContainer = document.querySelector('.cards');
        if (!cardsContainer) return;

        // Проходимося по localStorage і додаємо пости
        Object.keys(localStorage).forEach(key => {
            if (key.startsWith('userpost-')) {
                const postData = JSON.parse(localStorage.getItem(key));
                const { title, img, link, author } = postData;

                const postCard = document.createElement('div');
                postCard.classList.add('blog-card');
                postCard.innerHTML = `
                    <div class="blogcss">
                        <div class="blog-image">
                            <img src="${postData.thumbnail || img}" alt="User post image">
                        </div>
                    </div>
                    <p class="blog-category">${author || 'Користувач'}</p>
                    <h2 class="blog-title" style="word-wrap: break-word; padding: 0px 10px;
                        max-width: 100%; overflow: hidden; text-overflow: ellipsis;
                    ">${truncateTitle(title)}</h2>
                    <br>
                    <div class="blog-meta">
                        <a href="faculties.html#${key}" title="Переглянути пост" target="_blank" rel="noopener noreferrer">
                            <img src="../img/view.png" alt="Переглянути пост">
                        </a>
                        ${link ? `
                        <a href="${link}" target="_blank" rel="noopener noreferrer" title="Зовнішнє посилання">
                            <img src="../img/go-to.png" alt="Зовнішнє посилання">
                        </a>` : ''}
                    </div>
                `;
                cardsContainer.prepend(postCard);
            }
        });
    }
    */

    function renderStoredPosts() {
        const cardsContainer = document.querySelector('.cards');
        if (!cardsContainer) return;

        // Збір постів
        const posts = Object.keys(localStorage)
            .filter(key => key.startsWith('userpost-'))
            .map(key => {
                const post = JSON.parse(localStorage.getItem(key));
                return { key, ...post, timestamp: post.timestamp || 0 };
            });

        // Сортування за timestamp (від найновіших до найстаріших)
        posts.sort((a, b) => b.timestamp - a.timestamp);

        // Додавання постів у DOM
        posts.forEach(postData => {
            const { key, title, img, link, author, thumbnail } = postData;

            const postCard = document.createElement('div');
            postCard.classList.add('blog-card');
            postCard.innerHTML = `
                <div class="blogcss">
                    <div class="blog-image">
                        <img src="${thumbnail || img}" alt="User post image">
                    </div>
                </div>
                <p class="blog-category">${author || 'Користувач'}</p>
                <h2 class="blog-title" style="word-wrap: break-word; padding: 0px 10px;
                    max-width: 100%; overflow: hidden; text-overflow: ellipsis;
                ">${truncateTitle(title)}</h2>
                <br>
                <div class="blog-meta">
                    <a href="faculties.html#${key}" title="Переглянути пост" target="_blank" rel="noopener noreferrer">
                        <img src="../img/view.png" alt="Переглянути пост">
                    </a>
                    ${link ? `
                    <a href="${link}" target="_blank" rel="noopener noreferrer" title="Зовнішнє посилання">
                        <img src="../img/go-to.png" alt="Зовнішнє посилання">
                    </a>` : ''}
                </div>
            `;
            cardsContainer.appendChild(postCard); // додаємо у правильному порядку
        });
    }


            /*
            document.addEventListener('DOMContentLoaded', () => {
                const titleInput = document.getElementById('post-title');
                const charCountDisplay = document.getElementById('title-char-count');

                // Функція для оновлення лічильника
                function updateCharCount() {
                    const titleLength = titleInput.value.length;
                    charCountDisplay.textContent = `${titleLength}/55 символів`;

                    // Обмежити кількість символів у заголовку до 55
                    if (titleLength > 55) {
                        titleInput.value = titleInput.value.substring(0, 55); // обрізаємо текст, якщо перевищено 55 символів
                    }
                }

                // Викликаємо функцію при кожній зміні тексту
                titleInput.addEventListener('input', updateCharCount);
                
                // Оновлюємо лічильник при завантаженні сторінки
                updateCharCount();
            });
            */


            document.addEventListener('DOMContentLoaded', () => {
                const titleInput = document.getElementById('post-title');
                const charCountDisplay = document.getElementById('title-char-count');

                // Функція для оновлення лічильника
                function updateCharCount() {
                    const titleLength = titleInput.value.length;
                    charCountDisplay.textContent = `${titleLength}/55 символів`;
                }

                // Викликаємо функцію при кожній зміні тексту
                titleInput.addEventListener('input', updateCharCount);
                
                // Оновлюємо лічильник при завантаженні сторінки
                updateCharCount();
            });

            /*
            function truncateTitle(title) {
                if (title.length <= 55) {
                    return title;
                }
                let truncated = title.substring(0, 55);
                const lastSpaceIndex = truncated.lastIndexOf(' ');
                if (lastSpaceIndex > 0) {
                    truncated = truncated.substring(0, lastSpaceIndex); // Обрізаємо на останньому пробілі
                }
                return truncated + '...';
            }
            */

            function truncateTitle(title) {
                const maxLength = 55;
                if (title.length <= maxLength) return title;
            
                let truncated = title.substring(0, maxLength);
                const lastSpace = truncated.lastIndexOf(' ');
                if (lastSpace > 0) {
                    truncated = truncated.substring(0, lastSpace);
                }
            
                return truncated + '...';
            }  


        </script>
    </body>
</html>
        